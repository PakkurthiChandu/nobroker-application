<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Payment Page</title>
</head>
<body>
<h2>Unlock Owner Contact Details</h2>

<button id="pay-btn"
        th:data-price="${planPrice}"> <!-- price in paise -->
    Pay â‚¹<span th:text="${planPrice / 100}">50</span>
</button>

<script>
    document.getElementById("pay-btn").addEventListener("click", function () {
        const price = this.getAttribute("data-price");

        fetch("/api/payment/create-checkout-session", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ price: price })
        })
        .then(res => res.text())
        .then(url => {
            window.location.href = url;
        });
    });
</script>

</body>
</html>
