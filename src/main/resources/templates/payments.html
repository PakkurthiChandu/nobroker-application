<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="/images/nobroker-favicon.png">
  <title>NoBroker Dashboard</title>
  <link rel="icon" type="image/png" href="/images/nobroker-favicon.png">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f8f9fa;
      color: #333;
    }

    .main-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background-color: #fff;
      border-bottom: 1px solid #ddd;
      z-index: 1000;
      height: 60px;
    }

    .logo {
      width: auto;
      height: 30px;
      max-width: 150px; /* Adjust as needed */
      object-fit: contain; /* Prevents distortion */
    }
    .left-section {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 200px; /* Ensures enough space for logo */
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .btn-primary {
      background: #28a745;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    }

    .user-menu {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #007bff;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .container {
      display: flex;
      min-height: calc(100vh - 60px);
    }

    .sidebar {
      width: 300px;
      background: #fff;
      border-right: 1px solid #e9ecef;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      padding: 20px;
    }

    .sidebar h3 {
      margin-bottom: 20px;
      color: #495057;
      font-size: 16px;
    }

    .sidebar-menu {
      list-style: none;
    }

    .sidebar-menu li {
      margin-bottom: 8px;
      border-bottom: 1px solid #f0f0f0;
    }

    .sidebar-menu a {
      display: block;
      padding: 10px 15px;
      color: #6c757d;
      text-decoration: none;
      border-radius: 4px;
      transition: all 0.3s;
    }

    .sidebar-menu a:hover,
    .sidebar-menu a.active {
      background: #f8f9fa;
      color: #007bff;
    }

    .main-content {
      flex: 1;
      padding: 20px;
    }

    .profile-section {
      background: #fff;
      border-radius: 8px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .profile-section h2 {
      margin-bottom: 30px;
      color: #495057;
    }

    .form-group {
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }

    .form-group label {
      width: 120px;
      font-weight: 500;
      color: #495057;
    }

    .form-group input {
      flex: 1;
      padding: 10px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 14px;
    }

    .form-group input:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
    }

    .verification-link {
      color: #6c757d;
      text-decoration: underline;
      font-size: 12px;
      margin-left: 10px;
      cursor: pointer;
    }

    .whatsapp-toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 20px 0;
    }

    .toggle {
      width: 50px;
      height: 24px;
      background: #28a745;
      border-radius: 12px;
      position: relative;
      cursor: pointer;
    }

    .toggle::after {
      content: '';
      position: absolute;
      top: 2px;
      right: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
    }

    .save-btn {
      background: #e53e3e;
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      float: right;
    }

    .properties-section {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .property-tabs {
      display: flex;
      border-bottom: 1px solid #e9ecef;
      margin-bottom: 30px;
      flex-wrap: wrap;
      font-size: 18px;
    }

    .property-tab {
      padding: 15px 20px;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      color: #6c757d;
      font-weight: 500;
      white-space: nowrap;
    }

    .property-tab.active {
      color: #007bff;
      border-bottom-color: #007bff;
      background-color: #E8E8E8;
    }

    .property-columns {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
    }

    .property-column h3 {
      margin-bottom: 15px;
      color: #495057;
      font-size: 16px;
    }

    .property-links {
      list-style: none;
    }

    .property-links li {
      margin-bottom: 8px;
    }

    .property-links a {
      color: #007bff;
      text-decoration: none;
      font-size: 14px;
      display: block;
      padding: 5px 0;
    }

    .property-links a:hover {
      text-decoration: underline;
    }

    .chat-widget {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #e53e3e;
      color: white;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
    }

    .chat-widget:hover {
      transform: scale(1.1);
      transition: transform 0.2s;
    }

    .memory-indicator {
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 12px;
      position: fixed;
      bottom: 100px;
      right: 20px;
      z-index: 999;
    }

    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #e9ecef;
      }

      .form-group {
        flex-direction: column;
        align-items: flex-start;
      }

      .form-group label {
        width: auto;
        margin-bottom: 5px;
      }

      .property-tabs {
        overflow-x: auto;
      }
    }
    footer {
      background-color: #f0f0f0;
      color: #333;
      text-align: center;
    }
  </style>
</head>
<body>
<header class="main-header">
  <div th:replace="~{fragments/header :: header}"></div>
</header>

<div class="container" style="margin-top: 60px">
  <div class="sidebar">
    <h3>Manage your Account</h3>
    <ul class="sidebar-menu" th:if="${user != null}">
      <li><a  th:href="@{'/profile/view/' + ${user.userId}}">Basic Profile</a></li>
      <li><a th:href="@{'/shortlisted-properties/' + ${user.userId}}">Your Shortlists</a></li>
      <li><a class="active" th:href="@{'/shortlisted-payments/' + ${user.userId}}">Your Payments</a></li>
      <li><a th:href="@{'/your-properties/' + ${user.userId}}">Your Properties</a></li>
      <li><a th:href="@{'/logout'}">Sign Out</a></li>
    </ul>

  </div>

  <div class="main-content">
    <h2>Your Transactions</h2>

    <div th:if="${transactions != null and !transactions.isEmpty()}">
      <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
        <thead style="background-color: #f5f5f5;">
        <tr>
          <th style="padding: 12px; border: 1px solid #ddd;">Transaction ID</th>
          <th style="padding: 12px; border: 1px solid #ddd;">Amount (â‚¹)</th>
          <th style="padding: 12px; border: 1px solid #ddd;">Payment Time</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="transaction : ${transactions}">
          <td th:text="${transaction.id}" style="padding: 10px; border: 1px solid #eee;"></td>
          <td th:text="${transaction.amount}/100" style="padding: 10px; border: 1px solid #eee;"></td>
          <td th:text="${#temporals.format(transaction.paymentTime, 'dd-MM-yyyy HH:mm')}" style="padding: 10px; border: 1px solid #eee;"></td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- Fallback if transactions is null or empty -->
    <div th:if="${transactions == null or transactions.isEmpty()}" style="text-align:center; padding: 20px;">
      <p>No payment records found.</p>
    </div>

  </div>
</div>

<footer>
  <div class="properties-section">
    <div class="property-tabs">
      <div class="property-tab active">Properties & Flats for Sale</div>
      <div class="property-tab">Flats for Rent</div>
      <div class="property-tab">PG / Hostels</div>
      <div class="property-tab">Flatmates</div>
      <div class="property-tab">Miscellaneous</div>
      <div class="property-tab">Commercial</div>
      <div class="property-tab">New Projects & Plots</div>
      <div class="property-tab">Independent Houses & Villas</div>
    </div>

    <div class="property-columns">
      <div class="property-column">
        <h3>Flats for Sale in Bangalore</h3>
        <ul class="property-links">
          <li><a href="#">Flats for Sale in Koramangala</a></li>
          <li><a href="#">Flats for Sale in Marathahalli</a></li>
          <li><a href="#">Flats for Sale in HSR Layout</a></li>
          <li><a href="#">Flats for Sale in Whitefield</a></li>
          <li><a href="#">Flats for Sale in Indira Nagar</a></li>
          <li><a href="#">Flats for Sale in Bellandur</a></li>
          <li><a href="#">Flats for Sale in Chandra Layout</a></li>
          <li><a href="#">Flats for Sale in J. P Nagar</a></li>
          <li><a href="#">Flats for Sale in BTM Layout</a></li>
          <li><a href="#">Flats for Sale in Jayanagar</a></li>
        </ul>
      </div>

      <div class="property-column">
        <h3>Flats for Sale in Mumbai</h3>
        <ul class="property-links">
          <li><a href="#">Flats for Sale in Andheri West</a></li>
          <li><a href="#">Flats for Sale in Andheri East</a></li>
          <li><a href="#">Flats for Sale in Malad West</a></li>
          <li><a href="#">Flats for Sale in Navi Mumbai</a></li>
          <li><a href="#">Flats for Sale in Powai</a></li>
          <li><a href="#">Flats for Sale in Thane West</a></li>
          <li><a href="#">Flats for Sale in Mira Road East</a></li>
          <li><a href="#">Flats for Sale in Kharghar</a></li>
          <li><a href="#">Flats for Sale in Kandivali East</a></li>
          <li><a href="#">Flats for Sale in Bandra West</a></li>
        </ul>
      </div>

      <div class="property-column">
        <h3>Flats for Sale in Chennai</h3>
        <ul class="property-links">
          <li><a href="#">Flats for Sale in Velachery</a></li>
          <li><a href="#">Flats for Sale in Thiruvanmiyur</a></li>
          <li><a href="#">Flats for Sale in Madipakkam</a></li>
          <li><a href="#">Flats for Sale in Thoraipakkam</a></li>
          <li><a href="#">Flats for Sale in Sholinganallur</a></li>
          <li><a href="#">Flats for Sale in Medavakkam</a></li>
          <li><a href="#">Flats for Sale in Mylapore</a></li>
          <li><a href="#">Flats for Sale in Adyar</a></li>
          <li><a href="#">Flats for Sale in T Nagar</a></li>
          <li><a href="#">Flats for Sale in Perungudi</a></li>
        </ul>
      </div>

      <div class="property-column">
        <h3>Flats for Sale in Pune</h3>
        <ul class="property-links">
          <li><a href="#">Flats for Sale in Wakad</a></li>
          <li><a href="#">Flats for Sale in Kharadi</a></li>
          <li><a href="#">Flats for Sale in Baner</a></li>
          <li><a href="#">Flats for Sale in Hadapsar</a></li>
          <li><a href="#">Flats for Sale in Aundh</a></li>
          <li><a href="#">Flats for Sale in Kothrud</a></li>
          <li><a href="#">Flats for Sale in Pimpri-Saudagar</a></li>
          <li><a href="#">Flats for Sale in Viman Nagar</a></li>
          <li><a href="#">Flats for Sale in Pimpri</a></li>
          <li><a href="#">Flats for Sale in Hinjewadi</a></li>
        </ul>
      </div>

      <div class="property-column">
        <h3>Flats for Sale in Gurgaon</h3>
        <ul class="property-links">
          <li><a href="#">1 BHK Flats in Gurgaon</a></li>
          <li><a href="#">2 BHK Flats in Gurgaon</a></li>
          <li><a href="#">3 BHK Flats in Gurgaon</a></li>
          <li><a href="#">4 BHK Flats in Gurgaon</a></li>
          <li><a href="#">4+ BHK in Gurgaon</a></li>
          <li><a href="#">Fully Furnished Flats in Gurgaon</a></li>
          <li><a href="#">Semi Furnished Flats in Gurgaon</a></li>
          <li><a href="#">Unfurnished Flats in Gurgaon</a></li>
          <li><a href="#">Independent Floor for Sale in Gurgaon</a></li>
          <li><a href="#">Independent Houses For Sale In Gurgaon</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

<div class="chat-widget" onclick="startChat()">
  ðŸ’¬
</div>


</body>
</html>